{"uid":"8c30ce60b09a8e28","name":"test_static_lag","historyId":"pytest:test_lag#test_static_lag","time":{"start":1772108827069,"stop":1772109050354,"duration":223285},"status":"failed","statusMessage":"Exception: Time out occurred while waiting for stats to be accumulated","statusTrace":"api = <snappi_ixnetwork.snappi_api.Api object at 0x7fe5975c7490>\nutils = <module 'utils' from '/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/tests/utils/__init__.py'>\n\n    def test_static_lag(api, utils):\n        \"\"\"Demonstrates the following:\n        1) Creating a lag comprised of multiple ports\n        2) Creating emulated devices over the lag\n        3) Creating traffic over the emulated devices that will transmit\n        traffic to a single rx port.\n    \n            TX LAG              DUT             RX\n            ------+         +---------+\n            port 1|         |\n            ..    | ------> |\n            port n|         |\n            ------+\n        \"\"\"\n        config = api.config()\n        p1, p2, p3, p4 = (\n            config.ports.port(name=\"txp1\", location=utils.settings.ports[0])\n            .port(name=\"txp2\", location=utils.settings.ports[1])\n            .port(name=\"rxp1\", location=utils.settings.ports[2])\n            .port(name=\"rxp2\", location=utils.settings.ports[3])\n        )\n    \n        config.layer1.layer1(\n            name=\"layer1\",\n            port_names=[p.name for p in config.ports],\n            speed=utils.settings.speed,\n            media=utils.settings.media,\n        )\n    \n        lag1, lag2 = config.lags.lag(name=\"lag1\").lag(name=\"lag2\")\n        lp1, lp2 = lag1.ports.port(port_name=p1.name).port(port_name=p2.name)\n        lp3, lp4 = lag2.ports.port(port_name=p3.name).port(port_name=p4.name)\n    \n        lag1.protocol.static.lag_id = 1\n        lag2.protocol.static.lag_id = 2\n    \n        lp1.ethernet.name, lp2.ethernet.name = \"eth1\", \"eth2\"\n        lp3.ethernet.name, lp4.ethernet.name = \"eth3\", \"eth4\"\n    \n        lp1.ethernet.mac = \"00:11:02:00:00:01\"\n        lp2.ethernet.mac = \"00:22:02:00:00:01\"\n        lp3.ethernet.mac = \"00:33:02:00:00:01\"\n        lp4.ethernet.mac = \"00:44:02:00:00:01\"\n    \n        lp1.ethernet.vlans.vlan(priority=1, name=\"vlan1\", id=1)[-1]\n        lp2.ethernet.vlans.vlan(priority=1, name=\"vlan2\", id=1)[-1]\n        lp3.ethernet.vlans.vlan(priority=1, name=\"vlan3\", id=1)[-1]\n        lp4.ethernet.vlans.vlan(priority=1, name=\"vlan4\", id=1)[-1]\n    \n        packets = 2000\n        f1_size = 74\n        f2_size = 1500\n        d1, d2 = config.devices.device(name=\"device1\").device(name=\"device2\")\n        eth1, eth2 = d1.ethernets.add(), d2.ethernets.add()\n        eth1.connection.port_name, eth2.connection.port_name = lag1.name, lag2.name\n        eth1.name, eth2.name = \"d_eth1\", \"d_eth2\"\n        eth1.mac, eth2.mac = \"00:00:00:00:00:11\", \"00:00:00:00:00:22\"\n        ip1, ip2 = eth1.ipv4_addresses.add(), eth2.ipv4_addresses.add()\n        ip1.name, ip2.name = \"ip1\", \"ip2\"\n        ip1.address = \"10.1.1.1\"\n        ip1.gateway = \"10.1.1.2\"\n        ip2.address = \"10.1.1.2\"\n        ip2.gateway = \"10.1.1.1\"\n        f1, f2 = config.flows.flow(name=\"f1\").flow(name=\"f2\")\n        f1.tx_rx.port.tx_name, f1.tx_rx.port.rx_name = p1.name, p2.name\n        f2.tx_rx.port.tx_name, f2.tx_rx.port.rx_name = p3.name, p4.name\n        config.options.port_options.location_preemption = True\n        f1.duration.fixed_packets.packets = packets\n        f2.duration.fixed_packets.packets = packets\n        f1.size.fixed = f1_size\n        f2.size.fixed = f2_size\n        f1.rate.percentage = 10\n        f2.rate.percentage = 10\n    \n        f1.metrics.enable = True\n        f1.metrics.loss = True\n    \n        f2.metrics.enable = True\n        f2.metrics.loss = True\n    \n        utils.start_traffic(api, config, start_capture=False)\n        utils.wait_for(lambda: utils.is_traffic_stopped(api), \"traffic to stop\")\n    \n>       utils.wait_for(\n            lambda: utils.is_stats_accumulated(api, packets * 2),\n            \"stats to be accumulated\",\n        )\n\ntests/test_lag.py:87: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nfunc = <function test_static_lag.<locals>.<lambda> at 0x7fe595e7f9a0>\ncondition_str = 'stats to be accumulated', interval_seconds = 0.5\ntimeout_seconds = 30\n\n    def wait_for(func, condition_str, interval_seconds=None, timeout_seconds=None):\n        \"\"\"\n        Keeps calling the `func` until it returns true or `timeout_seconds` occurs\n        every `interval_seconds`. `condition_str` should be a constant string\n        implying the actual condition being tested.\n        Usage\n        -----\n        If we wanted to poll for current seconds to be divisible by `n`, we would\n        implement something similar to following:\n        ```\n        import time\n        def wait_for_seconds(n, **kwargs):\n            condition_str = 'seconds to be divisible by %d' % n\n            def condition_satisfied():\n                return int(time.time()) % n == 0\n            poll_until(condition_satisfied, condition_str, **kwargs)\n        ```\n        \"\"\"\n        if interval_seconds is None:\n            interval_seconds = settings.interval_seconds\n        if timeout_seconds is None:\n            timeout_seconds = settings.timeout_seconds\n        start_seconds = int(time.time())\n    \n        print(\"\\n\\nWaiting for %s ...\" % condition_str)\n        while True:\n            res = func()\n            if res:\n                print(\"Done waiting for %s\" % condition_str)\n                break\n            if res is None:\n                raise Exception(\"Wait aborted for %s\" % condition_str)\n            if timed_out(start_seconds, timeout_seconds):\n                msg = \"Time out occurred while waiting for %s\" % condition_str\n>               raise Exception(msg)\nE               Exception: Time out occurred while waiting for stats to be accumulated\n\ntests/utils/common.py:224: Exception","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"steps":[{"name":"--------------------------------- Captured Log ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 txp1 connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 txp2 connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 rxp1 connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 rxp2 connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"--------------------------------- Captured Out ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"resultFormat","value":"junit"},{"name":"suite","value":"pytest"},{"name":"host","value":"snappi-ixn-ci-novus10g"},{"name":"testClass","value":"test_lag"},{"name":"package","value":"test_lag"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":31,"broken":0,"skipped":1,"passed":284,"unknown":0,"total":316},"items":[{"uid":"cd926031f8fcb2cb","status":"passed","time":{"start":1771929175376,"stop":1771929367387,"duration":192011}},{"uid":"c6c50753afd7a2e8","status":"passed","time":{"start":1771838405193,"stop":1771838598103,"duration":192910}},{"uid":"689d348c93fb06f9","status":"passed","time":{"start":1771829588310,"stop":1771829781641,"duration":193331}},{"uid":"523a15e98c8134b6","status":"passed","time":{"start":1771499953069,"stop":1771500146880,"duration":193811}},{"uid":"694319a277445d8b","status":"passed","time":{"start":1771490556940,"stop":1771490754627,"duration":197687}},{"uid":"273d8100dbb96348","status":"passed","time":{"start":1771481382066,"stop":1771481577293,"duration":195227}},{"uid":"5e8a7ad87ab950d3","status":"passed","time":{"start":1771431963126,"stop":1771432151395,"duration":188269}},{"uid":"38265fff12ffa1ae","status":"passed","time":{"start":1771422245086,"stop":1771422436320,"duration":191234}},{"uid":"77a5c9afa86bb97e","status":"passed","time":{"start":1771299850499,"stop":1771300049176,"duration":198677}},{"uid":"42fa4e7dd6da8591","status":"passed","time":{"start":1771257408887,"stop":1771257610834,"duration":201947}},{"uid":"d7acb5ae5fe120f5","status":"passed","time":{"start":1770958578467,"stop":1770958771506,"duration":193039}},{"uid":"f4bc730e4f61d95d","status":"passed","time":{"start":1770371085975,"stop":1770371281289,"duration":195314}},{"uid":"f8b38fb05c761925","status":"passed","time":{"start":1770209818625,"stop":1770210019142,"duration":200517}},{"uid":"534bc91187d8584a","status":"passed","time":{"start":1770191080383,"stop":1770191273914,"duration":193531}},{"uid":"24a4dd801ae93210","status":"passed","time":{"start":1770178714922,"stop":1770178902861,"duration":187939}},{"uid":"e3e54af0d332cfcd","status":"passed","time":{"start":1770096090928,"stop":1770096275251,"duration":184323}},{"uid":"d03d11da3a79647b","status":"passed","time":{"start":1770024287878,"stop":1770024481570,"duration":193692}},{"uid":"b233e3169b25c73c","status":"passed","time":{"start":1770015142517,"stop":1770015336531,"duration":194014}},{"uid":"3fb1699b2ee627a7","status":"passed","time":{"start":1769683393795,"stop":1769683579484,"duration":185689}},{"uid":"6c953e98787ecf7a","status":"passed","time":{"start":1769672517079,"stop":1769672710470,"duration":193391}}]},"tags":[]},"source":"8c30ce60b09a8e28.json","parameterValues":[]}