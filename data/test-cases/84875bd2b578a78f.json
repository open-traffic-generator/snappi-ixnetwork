{"uid":"84875bd2b578a78f","name":"test_bgpv4_stats","historyId":"pytest:bgp.test_bgpv4_stats#test_bgpv4_stats","time":{"start":1770191080383,"stop":1770191158835,"duration":78452},"status":"failed","statusMessage":"assert 4 == 2\n +  where 4 = len(<snappi.snappi.Bgpv4MetricIter object at 0x7fa4c5dcafc0>)\n +    where <snappi.snappi.Bgpv4MetricIter object at 0x7fa4c5dcafc0> = <snappi.snappi.MetricsResponse object at 0x7fa4c30612b0>.bgpv4_metrics","statusTrace":"api = <snappi_ixnetwork.snappi_api.Api object at 0x7fa4c5a45390>\nb2b_raw_config = <snappi.snappi.Config object at 0x7fa4c2ca1490>\nutils = <module 'utils' from '/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/tests/utils/__init__.py'>\n\n    def test_bgpv4_stats(api, b2b_raw_config, utils):\n        \"\"\"\n        Test for the bgpv4 metrics\n        \"\"\"\n        api.set_config(api.config())\n        b2b_raw_config.flows.clear()\n    \n        p1, p2 = b2b_raw_config.ports\n        d1, d2 = b2b_raw_config.devices.device(name=\"tx_bgp\").device(name=\"rx_bgp\")\n    \n        eth1, eth2 = d1.ethernets.add(), d2.ethernets.add()\n        eth1.connection.port_name, eth2.connection.port_name = p1.name, p2.name\n        eth1.mac, eth2.mac = \"00:00:00:00:00:11\", \"00:00:00:00:00:22\"\n        ip1, ip2 = eth1.ipv4_addresses.add(), eth2.ipv4_addresses.add()\n        bgp1, bgp2 = d1.bgp, d2.bgp\n    \n        eth1.name, eth2.name = \"eth1\", \"eth2\"\n        ip1.name, ip2.name = \"ip1\", \"ip2\"\n        bgp1.router_id, bgp2.router_id = \"192.0.0.1\", \"192.0.0.2\"\n        bgp1_int, bgp2_int = bgp1.ipv4_interfaces.add(), bgp2.ipv4_interfaces.add()\n        bgp1_int.ipv4_name, bgp2_int.ipv4_name = ip1.name, ip2.name\n        bgp1_peer, bgp2_peer = bgp1_int.peers.add(), bgp2_int.peers.add()\n        bgp1_peer.name, bgp2_peer.name = \"bgp1\", \"bpg2\"\n        ip1.address = \"10.1.1.1\"\n        ip1.gateway = \"10.1.1.2\"\n        ip1.prefix = 24\n    \n        ip2.address = \"10.1.1.2\"\n        ip2.gateway = \"10.1.1.1\"\n        ip2.prefix = 24\n    \n        bgp1_peer.peer_address = \"10.1.1.2\"\n        bgp1_peer.as_type = \"ibgp\"\n        bgp1_peer.as_number = 10\n    \n        bgp2_peer.peer_address = \"10.1.1.1\"\n        bgp2_peer.as_type = \"ibgp\"\n        bgp2_peer.as_number = 10\n    \n        utils.start_traffic(api, b2b_raw_config)\n        utils.wait_for(\n            lambda: results_ok(api), \"stats to be as expected\", timeout_seconds=20\n        )\n        enums = [\n            \"session_state\",\n            \"routes_advertised\",\n            \"routes_received\",\n            \"route_withdraws_sent\",\n            \"route_withdraws_received\",\n            \"updates_sent\",\n            \"updates_received\",\n            \"opens_sent\",\n            \"opens_received\",\n            \"keepalives_sent\",\n            \"keepalives_received\",\n            \"notifications_sent\",\n            \"notifications_received\",\n        ]\n        expected_results = {\n            \"tx_bgp\": [\"up\", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            \"rx_bgp\": [\"up\", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        }\n        req = api.metrics_request()\n        req.bgpv4.peer_names = []\n        req.bgpv4.column_names = enums[:3]\n        results = api.get_metrics(req)\n>       assert len(results.bgpv4_metrics) == 2\nE       assert 4 == 2\nE        +  where 4 = len(<snappi.snappi.Bgpv4MetricIter object at 0x7fa4c5dcafc0>)\nE        +    where <snappi.snappi.Bgpv4MetricIter object at 0x7fa4c5dcafc0> = <snappi.snappi.MetricsResponse object at 0x7fa4c30612b0>.bgpv4_metrics\n\ntests/bgp/test_bgpv4_stats.py:71: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"steps":[{"name":"--------------------------------- Captured Log ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 tx connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 rx connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"--------------------------------- Captured Out ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"resultFormat","value":"junit"},{"name":"suite","value":"pytest"},{"name":"host","value":"snappi-ixn-ci-novus10g"},{"name":"testClass","value":"bgp.test_bgpv4_stats"},{"name":"package","value":"bgp.test_bgpv4_stats"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":24,"broken":0,"skipped":0,"passed":282,"unknown":0,"total":306},"items":[{"uid":"a04394adfe8bba25","status":"passed","time":{"start":1770178714922,"stop":1770178805995,"duration":91073}},{"uid":"db08ec5faff90216","status":"passed","time":{"start":1770096090928,"stop":1770096181942,"duration":91014}},{"uid":"8e037453f397ae6","status":"passed","time":{"start":1770024287878,"stop":1770024392315,"duration":104437}},{"uid":"7c853f452743d736","status":"passed","time":{"start":1770015142517,"stop":1770015253227,"duration":110710}},{"uid":"78a07de2c5df47e4","status":"passed","time":{"start":1769683393795,"stop":1769683504213,"duration":110418}},{"uid":"c473fbbfa5032e","status":"passed","time":{"start":1769672517079,"stop":1769672625365,"duration":108286}},{"uid":"9712f004b96f407f","status":"passed","time":{"start":1769663188141,"stop":1769663300751,"duration":112610}},{"uid":"77deaa32fe17b7fe","status":"passed","time":{"start":1769624848819,"stop":1769624960762,"duration":111943}},{"uid":"40642ad9d77b0d73","status":"passed","time":{"start":1769595680741,"stop":1769595795167,"duration":114426}},{"uid":"3227fc2cbe0a81c1","status":"passed","time":{"start":1769585543268,"stop":1769585655292,"duration":112024}},{"uid":"919e28b7f00e4ea","status":"passed","time":{"start":1769077516718,"stop":1769077629909,"duration":113191}},{"uid":"74b6d2ac7aeca119","status":"passed","time":{"start":1768561931952,"stop":1768562040583,"duration":108631}},{"uid":"be63ee9ade0ee2b","status":"passed","time":{"start":1768478161862,"stop":1768478273102,"duration":111240}},{"uid":"45d4f402ac86ed7f","status":"passed","time":{"start":1768469097769,"stop":1768469209190,"duration":111421}},{"uid":"adb4fee8c64d7424","status":"passed","time":{"start":1768448859665,"stop":1768448974554,"duration":114889}},{"uid":"d1d6c5200a9b4f67","status":"passed","time":{"start":1768372946323,"stop":1768373058840,"duration":112517}},{"uid":"6415751f91029416","status":"passed","time":{"start":1767873824411,"stop":1767873924956,"duration":100545}},{"uid":"79e4585b6cef2815","status":"passed","time":{"start":1767862092912,"stop":1767862202011,"duration":109099}},{"uid":"fd0f5d0da04c6942","status":"passed","time":{"start":1767677129994,"stop":1767677235647,"duration":105653}},{"uid":"2b03a35c2b4a64e5","status":"passed","time":{"start":1765779386953,"stop":1765779502717,"duration":115764}}]},"tags":[]},"source":"84875bd2b578a78f.json","parameterValues":[]}