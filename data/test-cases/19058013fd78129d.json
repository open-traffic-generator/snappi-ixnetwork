{"uid":"19058013fd78129d","name":"test_bgpv6_routes","historyId":"pytest:traffic.test_device_bgp_ep#test_bgpv6_routes","time":{"start":1769672517079,"stop":1769672605349,"duration":88270},"status":"failed","statusMessage":"assert 0 == 1\n +  where 0 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7f235e271f00>)\n +    where <snappi.snappi.Bgpv6MetricIter object at 0x7f235e271f00> = <snappi.snappi.MetricsResponse object at 0x7f235eb59f80>.bgpv6_metrics","statusTrace":"api = <snappi_ixnetwork.snappi_api.Api object at 0x7f23602db520>\nb2b_raw_config = <snappi.snappi.Config object at 0x7f235eb5bba0>\nutils = <module 'utils' from '/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/tests/utils/__init__.py'>\n\n    def test_bgpv6_routes(api, b2b_raw_config, utils):\n        \"\"\"\n        Test for the bgpv6 routes\n        \"\"\"\n        size = 1500\n        packets = 1000\n        api.set_config(api.config())\n        b2b_raw_config.flows.clear()\n    \n        p1, p2 = b2b_raw_config.ports\n        d1, d2 = b2b_raw_config.devices.device(name=\"tx_bgp\").device(name=\"rx_bgp\")\n        eth1, eth2 = d1.ethernets.add(), d2.ethernets.add()\n        eth1.connection.port_name, eth2.connection.port_name = p1.name, p2.name\n        eth1.mac, eth2.mac = \"00:00:00:00:00:11\", \"00:00:00:00:00:22\"\n        ip1, ip2 = eth1.ipv6_addresses.add(), eth2.ipv6_addresses.add()\n        bgp1, bgp2 = d1.bgp, d2.bgp\n    \n        eth1.name, eth2.name = \"eth1\", \"eth2\"\n        ip1.name, ip2.name = \"ip1\", \"ip2\"\n    \n        ip1.address = \"2000::1\"\n        ip1.gateway = \"3000::1\"\n        ip1.prefix = 64\n    \n        ip2.address = \"3000::1\"\n        ip2.gateway = \"2000::1\"\n        ip2.prefix = 64\n    \n        bgp1.router_id, bgp2.router_id = \"192.0.0.1\", \"192.0.0.2\"\n        bgp1_int, bgp2_int = bgp1.ipv6_interfaces.add(), bgp2.ipv6_interfaces.add()\n        bgp1_int.ipv6_name, bgp2_int.ipv6_name = ip1.name, ip2.name\n        bgp1_peer, bgp2_peer = bgp1_int.peers.add(), bgp2_int.peers.add()\n        bgp1_peer.name, bgp2_peer.name = \"bgp1\", \"bpg2\"\n    \n        bgp1_peer.peer_address = \"3000::1\"\n        bgp1_peer.as_type = \"ibgp\"\n        bgp1_peer.as_number = 10\n    \n        bgp2_peer.peer_address = \"2000::1\"\n        bgp2_peer.as_type = \"ibgp\"\n        bgp2_peer.as_number = 10\n    \n        bgp1_rr1 = bgp1_peer.v6_routes.add(name=\"bgp1_rr1\")\n        bgp1_rr2 = bgp1_peer.v6_routes.add(name=\"bgp1_rr2\")\n        bgp2_rr1 = bgp2_peer.v6_routes.add(name=\"bgp2_rr1\")\n        bgp2_rr2 = bgp2_peer.v6_routes.add(name=\"bgp2_rr2\")\n    \n        bgp1_rr1.addresses.add(address=\"4000::1\", prefix=64)\n        bgp1_rr2.addresses.add(address=\"5000::1\", prefix=64)\n    \n        bgp2_rr1.addresses.add(address=\"4000::1\", prefix=64)\n        bgp2_rr2.addresses.add(address=\"5000::1\", prefix=64)\n    \n        flow_bgp = b2b_raw_config.flows.flow(name=\"flow_bgp\")[-1]\n    \n        flow_bgp.rate.percentage = 1\n        flow_bgp.duration.fixed_packets.packets = packets\n        flow_bgp.size.fixed = size\n        flow_bgp.tx_rx.device.tx_names = [\n            bgp1_rr1.name,\n            bgp1_rr2.name,\n        ]\n        flow_bgp.tx_rx.device.rx_names = [\n            bgp2_rr1.name,\n            bgp2_rr2.name,\n        ]\n        flow_bgp.metrics.enable = True\n        flow_bgp.metrics.loss = True\n        utils.start_traffic(api, b2b_raw_config, start_capture=False)\n    \n        req = api.metrics_request()\n        req.bgpv6.peer_names = []\n        results = api.get_metrics(req)\n        enums = [\n            \"session_state\",\n            \"routes_advertised\",\n            \"route_withdraws_sent\",\n        ]\n        expected_results = {\n            \"tx_bgp\": [\"up\", 0, 0],\n            \"rx_bgp\": [\"up\", 0, 0],\n        }\n    \n        assert len(results.bgpv6_metrics) == 2\n        for bgp_res in results.bgpv6_metrics:\n            for i, enum in enumerate(enums):\n                val = expected_results[bgp_res.name][i]\n                assert getattr(bgp_res, enum) == val\n    \n        req = api.metrics_request()\n        req.bgpv6.peer_names = [\"rx_bgp\"]\n        results = api.get_metrics(req)\n    \n>       assert len(results.bgpv6_metrics) == 1\nE       assert 0 == 1\nE        +  where 0 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7f235e271f00>)\nE        +    where <snappi.snappi.Bgpv6MetricIter object at 0x7f235e271f00> = <snappi.snappi.MetricsResponse object at 0x7f235eb59f80>.bgpv6_metrics\n\ntests/traffic/test_device_bgp_ep.py:98: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"steps":[{"name":"--------------------------------- Captured Log ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 tx connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1522 rx connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"--------------------------------- Captured Out ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"resultFormat","value":"junit"},{"name":"suite","value":"pytest"},{"name":"host","value":"snappi-ixn-ci-novus10g"},{"name":"testClass","value":"traffic.test_device_bgp_ep"},{"name":"package","value":"traffic.test_device_bgp_ep"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":34,"broken":0,"skipped":1,"passed":261,"unknown":0,"total":296},"items":[{"uid":"ab65998416e0bb04","status":"failed","statusDetails":"assert 4 == 2\n +  where 4 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7f28b6f2c6c0>)\n +    where <snappi.snappi.Bgpv6MetricIter object at 0x7f28b6f2c6c0> = <snappi.snappi.MetricsResponse object at 0x7f28b89e3060>.bgpv6_metrics","time":{"start":1769663188141,"stop":1769663269601,"duration":81460}},{"uid":"5ba1e895476171a8","status":"failed","statusDetails":"assert 0 == 1\n +  where 0 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7f30ee54be40>)\n +    where <snappi.snappi.Bgpv6MetricIter object at 0x7f30ee54be40> = <snappi.snappi.MetricsResponse object at 0x7f30ee6cfba0>.bgpv6_metrics","time":{"start":1769624848819,"stop":1769624933215,"duration":84396}},{"uid":"e06ce2581bca0a70","status":"passed","time":{"start":1769595680741,"stop":1769595782981,"duration":102240}},{"uid":"2932fb29685edb","status":"passed","time":{"start":1769585543268,"stop":1769585650047,"duration":106779}},{"uid":"641ddfafe3809fa3","status":"passed","time":{"start":1769077516718,"stop":1769077621389,"duration":104671}},{"uid":"4e47461fee9fd8bd","status":"passed","time":{"start":1768561931952,"stop":1768562037385,"duration":105433}},{"uid":"4676255a3cd4f6b9","status":"passed","time":{"start":1768478161862,"stop":1768478277513,"duration":115651}},{"uid":"ccc7c63c558418b2","status":"failed","statusDetails":"assert 4 == 2\n +  where 4 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7f7d2019b180>)\n +    where <snappi.snappi.Bgpv6MetricIter object at 0x7f7d2019b180> = <snappi.snappi.MetricsResponse object at 0x7f7d1ff245e0>.bgpv6_metrics","time":{"start":1768469097769,"stop":1768469182548,"duration":84779}},{"uid":"42a69eecb846d069","status":"passed","time":{"start":1768448859665,"stop":1768448968916,"duration":109251}},{"uid":"4cb22d0f3e4f595f","status":"passed","time":{"start":1768372946323,"stop":1768373057720,"duration":111397}},{"uid":"ca39b9a5317c198","status":"failed","statusDetails":"assert 4 == 2\n +  where 4 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7fe59b3a4a40>)\n +    where <snappi.snappi.Bgpv6MetricIter object at 0x7fe59b3a4a40> = <snappi.snappi.MetricsResponse object at 0x7fe59a04b3d0>.bgpv6_metrics","time":{"start":1767873824411,"stop":1767873909804,"duration":85393}},{"uid":"7d17a806d4c596f2","status":"passed","time":{"start":1767862092912,"stop":1767862202054,"duration":109142}},{"uid":"5894bc4129374b6c","status":"passed","time":{"start":1767677129994,"stop":1767677237046,"duration":107052}},{"uid":"ef67e06e8df0b8f4","status":"passed","time":{"start":1765779386953,"stop":1765779486901,"duration":99948}},{"uid":"60b9ed2e5e1066a0","status":"passed","time":{"start":1765462253388,"stop":1765462364686,"duration":111298}},{"uid":"9ddb52665b544233","status":"passed","time":{"start":1765452139269,"stop":1765452244606,"duration":105337}},{"uid":"85f062e0116cdf86","status":"passed","time":{"start":1765442576325,"stop":1765442696479,"duration":120154}},{"uid":"5c44ef73121a5e34","status":"failed","statusDetails":"assert 4 == 2\n +  where 4 = len(<snappi.snappi.Bgpv6MetricIter object at 0x7f14d3b5df40>)\n +    where <snappi.snappi.Bgpv6MetricIter object at 0x7f14d3b5df40> = <snappi.snappi.MetricsResponse object at 0x7f14d08bd490>.bgpv6_metrics","time":{"start":1765433708748,"stop":1765433800051,"duration":91303}},{"uid":"6131ad4e86b7ea6e","status":"passed","time":{"start":1765424930744,"stop":1765425027978,"duration":97234}},{"uid":"46dba280a9ff7e7b","status":"passed","time":{"start":1765398148379,"stop":1765398260680,"duration":112301}}]},"tags":[]},"source":"19058013fd78129d.json","parameterValues":[]}