{"uid":"85adf3f834135a58","name":"test_phb_ecn","historyId":"pytest:test_phb_ecn#test_phb_ecn","time":{"start":1746414762134,"stop":1746414881405,"duration":119271},"status":"failed","statusMessage":"snappi_ixnetwork.exceptions.SnappiIxnException:   File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 276, in set_config\n    self.config_ixnetwork(config)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 364, in config_ixnetwork\n    self.traffic_item.config()\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 916, in config\n    ixn_traffic_item = self.get_ixn_config(self._config)[0]\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 574, in get_ixn_config\n    self._importconfig(imports)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 502, in _importconfig\n    raise SnappiIxnException(\n [{'xpath': '', 'message': 'Object reference not set to an instance of an object.', 'severity': 'kError', 'category': 'invalidCommit', 'property': 'noAtt'}, {'xpath': '', 'message': 'Object reference not set to an instance of an object.', 'severity': 'kError', 'category': 'invalidCommit', 'property': 'noAtt'}]","statusTrace":"self = <snappi_ixnetwork.snappi_api.Api object at 0x7f99c6897040>\nconfig = <snappi.snappi.Config object at 0x7f99c51c9f30>\n\n    def set_config(self, config):\n        \"\"\"Set or update the configuration\"\"\"\n        try:\n            if isinstance(config, (type(self._config_type), str)) is False:\n                raise TypeError(\n                    \"The content must be of type Union[Config, str]\"\n                )\n    \n            if isinstance(config, str) is True:\n                config = self._config_type.deserialize(config)\n>           self.config_ixnetwork(config)\n\nsnappi_ixnetwork/snappi_api.py:276: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsnappi_ixnetwork/snappi_api.py:364: in config_ixnetwork\n    self.traffic_item.config()\nsnappi_ixnetwork/trafficitem.py:916: in config\n    ixn_traffic_item = self.get_ixn_config(self._config)[0]\nsnappi_ixnetwork/trafficitem.py:574: in get_ixn_config\n    self._importconfig(imports)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <snappi_ixnetwork.trafficitem.TrafficItem object at 0x7f99c6bf39d0>\nimports = {'traffic': {'trafficItem': [{'configElement': [{'stack': [...], 'xpath': '/traffic/trafficItem[1]/configElement[1]'}]...dpointSet[1]'}], 'name': 'Ipv4 with Phb and Ecn', 'srcDestMesh': 'oneToOne', ...}], 'xpath': '/traffic'}, 'xpath': '/'}\n\n    def _importconfig(self, imports):\n        imports[\"xpath\"] = \"/\"\n        href = \"%sresourceManager\" % self._api._ixnetwork.href\n        url = \"%s/operations/importconfig\" % href\n        json_dump = json.dumps(imports)\n        self.logger.debug(\"import traffic config\")\n        self.logger.debug(\"{}\".format(json_dump))\n        payload = {\n            \"arg1\": href,\n            \"arg2\": json_dump,\n            \"arg3\": False,\n            \"arg4\": \"suppressNothing\",\n            \"arg5\": True,\n        }\n        try:\n            # TODO for larger config rest api is throwing error,\n            # with no url found, when the first response is 202 (in-progress)\n            # its keep checking the status of the url with 1 sec sleep, and\n            # after a while error is thrown. but could see the configuration\n            # applied at Ixnetwork. (Need to check with Eng team)\n            response = self._api._request(\"POST\", url=url, payload=payload)\n        except Exception:\n            return\n        self.logger.debug(str(response))\n        if (\n            response[\"result\"].get(\"errata\") is not None\n            and response[\"result\"][\"errata\"] != []\n        ):\n            self._api.get_json_import_errors()\n>           raise SnappiIxnException(\n                400, \"{}\".format(response[\"result\"][\"errata\"])\n            )\nE           snappi_ixnetwork.exceptions.SnappiIxnException:  [{'xpath': '', 'message': 'Object reference not set to an instance of an object.', 'severity': 'kError', 'category': 'invalidCommit', 'property': 'noAtt'}, {'xpath': '', 'message': 'Object reference not set to an instance of an object.', 'severity': 'kError', 'category': 'invalidCommit', 'property': 'noAtt'}]\n\nsnappi_ixnetwork/trafficitem.py:502: SnappiIxnException\n\nDuring handling of the above exception, another exception occurred:\n\napi = <snappi_ixnetwork.snappi_api.Api object at 0x7f99c6897040>\ntx_port = <snappi.snappi.Port object at 0x7f99c51ca4d0>\nrx_port = <snappi.snappi.Port object at 0x7f99c51cb9c0>\nb2b_raw_config = <snappi.snappi.Config object at 0x7f99c51c9f30>\n\n    def test_phb_ecn(api, tx_port, rx_port, b2b_raw_config):\n        \"\"\"\n        This will test that phb and ecn are set on an ipv4 header\n        \"\"\"\n        b2b_raw_config.flows.clear()\n        f = b2b_raw_config.flows.flow()[-1]\n        f.name = \"Ipv4 with Phb and Ecn\"\n        f.tx_rx.port.tx_name = tx_port.name\n        f.tx_rx.port.rx_name = rx_port.name\n        f.packet.ethernet().ipv4()\n        ip = f.packet[-1]\n        ip.priority.choice = ip.priority.DSCP\n        ip.priority.dscp.phb.values = [\n            ip.priority.dscp.phb.CS2,\n            ip.priority.dscp.phb.CS1,\n            ip.priority.dscp.phb.CS5,\n        ]\n        ip.priority.dscp.ecn.value = ip.priority.dscp.ecn.CAPABLE_TRANSPORT_1\n>       api.set_config(b2b_raw_config)\n\ntests/test_phb_ecn.py:19: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <snappi_ixnetwork.snappi_api.Api object at 0x7f99c6897040>\nconfig = <snappi.snappi.Config object at 0x7f99c51c9f30>\n\n    def set_config(self, config):\n        \"\"\"Set or update the configuration\"\"\"\n        try:\n            if isinstance(config, (type(self._config_type), str)) is False:\n                raise TypeError(\n                    \"The content must be of type Union[Config, str]\"\n                )\n    \n            if isinstance(config, str) is True:\n                config = self._config_type.deserialize(config)\n            self.config_ixnetwork(config)\n            # CP-DP Convergence config\n            ixn_cpdpconvergence = self._traffic.Statistics.CpdpConvergence\n            ixn_cpdpconvergence.Enabled = False\n            cfg = config.get(\"events\")\n            if cfg is not None:\n                cp_events = cfg.get(\"cp_events\")\n                if cp_events is not None:\n                    cp_events_enable = cp_events.get(\"enable\")\n                else:\n                    cp_events_enable = False\n                dp_events = cfg.get(\"dp_events\")\n                if dp_events is not None:\n                    dp_events_enable = dp_events.get(\"enable\")\n                    rx_rate_threshold = dp_events.get(\"rx_rate_threshold\")\n                else:\n                    dp_events_enable = False\n                # Enable cp-dp convergence if any one of cp or dp is true\n                if cp_events_enable or dp_events_enable:\n                    ixn_cpdpconvergence.Enabled = True\n                    # For CP events\n                    if cp_events_enable:\n                        ixn_cpdpconvergence.EnableControlPlaneEvents = True\n                    # For DP events\n                    if dp_events_enable:\n                        if self.traffic_item.has_latency is True:\n                            raise Exception(\n                                \"We are supporting either latency or dp convergence\"\n                            )\n                        ixn_cpdpconvergence.EnableDataPlaneEventsRateMonitor = True\n                        ixn_cpdpconvergence.DataPlaneThreshold = rx_rate_threshold\n    \n                for ixn_traffic_item in self._traffic_item.find():\n                    ixn_traffic_item.Tracking.find()[0].TrackBy = [\n                        \"destEndpoint0\",\n                        \"destSessionDescription0\",\n                    ]\n            else:\n                ixn_cpdpconvergence.Enabled = False\n    \n        except Exception as err:\n>           raise SnappiIxnException(err)\nE           snappi_ixnetwork.exceptions.SnappiIxnException:   File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 276, in set_config\nE               self.config_ixnetwork(config)\nE             File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 364, in config_ixnetwork\nE               self.traffic_item.config()\nE             File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 916, in config\nE               ixn_traffic_item = self.get_ixn_config(self._config)[0]\nE             File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 574, in get_ixn_config\nE               self._importconfig(imports)\nE             File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 502, in _importconfig\nE               raise SnappiIxnException(\nE            [{'xpath': '', 'message': 'Object reference not set to an instance of an object.', 'severity': 'kError', 'category': 'invalidCommit', 'property': 'noAtt'}, {'xpath': '', 'message': 'Object reference not set to an instance of an object.', 'severity': 'kError', 'category': 'invalidCommit', 'property': 'noAtt'}]\n\nsnappi_ixnetwork/snappi_api.py:317: SnappiIxnException","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"steps":[{"name":"--------------------------------- Captured Log ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Config validation 0.004s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Ports configuration 91.661s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Captures configuration 0.385s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Location hosts ready [novus1-715849.ccu.is.keysight.com] 0.093s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Speed conversion is not require for (port.name, speed) : [('tx', 'normal'), ('rx', 'normal')]","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Aggregation mode speed change 0.147s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Location preemption [novus1-715849.ccu.is.keysight.com;1;1, novus1-715849.ccu.is.keysight.com;1;2] 0.118s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Location connect [tx, rx] 5.710s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1440 tx connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"WARNING  root:snappi_api.py:1440 rx connectedLinkDown","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Location state check [tx, rx] 0.297s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Location configuration 7.392s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Layer1 configuration 7.101s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Lag Configuration 8.224s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Convert device config : 0.556s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Create IxNetwork device config : 0.000s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Push IxNetwork device config : 0.097s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Devices configuration 0.800s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1434 Flows configuration 2.016s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"--------------------------------- Captured Out ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":21,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"resultFormat","value":"junit"},{"name":"suite","value":"pytest"},{"name":"host","value":"snappi-ixn-ci-novus10g"},{"name":"testClass","value":"test_phb_ecn"},{"name":"package","value":"test_phb_ecn"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":6,"broken":0,"skipped":0,"passed":109,"unknown":0,"total":115},"items":[{"uid":"c33d149f7a6b081f","status":"passed","time":{"start":1746232601079,"stop":1746232637904,"duration":36825}},{"uid":"936b135a48ca53eb","status":"passed","time":{"start":1746224382039,"stop":1746224427045,"duration":45006}},{"uid":"a593014f8d449044","status":"passed","time":{"start":1746217344058,"stop":1746217388433,"duration":44375}},{"uid":"d6eb31703524c806","status":"passed","time":{"start":1746199805015,"stop":1746199847775,"duration":42760}},{"uid":"b19201e6c9c16ab9","status":"passed","time":{"start":1746181689995,"stop":1746181741813,"duration":51818}},{"uid":"3d93573bc5d97bde","status":"passed","time":{"start":1746174663641,"stop":1746174705177,"duration":41536}},{"uid":"db5ea15de161b6d1","status":"passed","time":{"start":1746117825457,"stop":1746117864274,"duration":38817}},{"uid":"3b93c51150ea4f43","status":"passed","time":{"start":1746098916418,"stop":1746098954340,"duration":37922}},{"uid":"cfed10bf0575acad","status":"passed","time":{"start":1746064489784,"stop":1746064531512,"duration":41728}},{"uid":"a80e3259eb44bc2b","status":"passed","time":{"start":1746042370552,"stop":1746042382839,"duration":12287}},{"uid":"f7cc2b67c2d9f23","status":"passed","time":{"start":1746025407819,"stop":1746025456063,"duration":48244}},{"uid":"8f0ce4cc53bcacd5","status":"passed","time":{"start":1746017351140,"stop":1746017391930,"duration":40790}},{"uid":"f587d02adb32dc92","status":"passed","time":{"start":1745951248306,"stop":1745951292761,"duration":44455}},{"uid":"1f229fd253c5c060","status":"passed","time":{"start":1745944306045,"stop":1745944351954,"duration":45909}},{"uid":"ce19ef5729248691","status":"passed","time":{"start":1745937122343,"stop":1745937161050,"duration":38707}},{"uid":"3bffcafc0d0a625c","status":"passed","time":{"start":1745930256769,"stop":1745930290737,"duration":33968}},{"uid":"be0c52eb5370a3c1","status":"passed","time":{"start":1745921505820,"stop":1745921548173,"duration":42353}},{"uid":"8b8f8c945109e7af","status":"passed","time":{"start":1745907259784,"stop":1745907298680,"duration":38896}},{"uid":"9ad622a98086882a","status":"passed","time":{"start":1745902727011,"stop":1745902774149,"duration":47138}},{"uid":"efff4cf249d4eb9c","status":"failed","statusDetails":"snappi_ixnetwork.exceptions.SnappiIxnException:   File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 276, in set_config\n    self.config_ixnetwork(config)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 364, in config_ixnetwork\n    self.traffic_item.config()\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 879, in config\n    ixn_traffic_item = self.get_ixn_config(self._config)[0]\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 535, in get_ixn_config\n    tr = self.create_traffic(config)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/trafficitem.py\", line 689, in create_traffic\n    for snappi_eotr in config.egress_only_tracking:\n 'Config' object has no attribute 'egress_only_tracking'","time":{"start":1745865135575,"stop":1745865171175,"duration":35600}}]},"tags":[]},"source":"85adf3f834135a58.json","parameterValues":[]}