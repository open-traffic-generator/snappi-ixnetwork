{"uid":"39a012c9bb7c05f0","name":"test_layer1_flow_control_8021qbb","historyId":"pytest:layer1.test_layer1_flow_control_8021qbb#test_layer1_flow_control_8021qbb","time":{"start":1753390964676,"stop":1753391046599,"duration":81923},"status":"failed","statusMessage":"assert [1, 0, 2, 3, -1, -1, -1, -1] == [1, 0, 2, 3, 7, 5, 6, 7]\n  \n  At index 4 diff: -1 != 7\n  \n  Full diff:\n    [\n        1,\n        0,\n        2,\n        3,\n  -     7,\n  ?     ^\n  +     -1,\n  ?     ^^\n  -     5,\n  ?     ^\n  +     -1,\n  ?     ^^\n  -     6,\n  ?     ^\n  +     -1,\n  ?     ^^\n  -     7,\n  ?     ^\n  +     -1,\n  ?     ^^\n    ]","statusTrace":"api = <snappi_ixnetwork.snappi_api.Api object at 0x7f2267aefa60>\nutils = <module 'utils' from '/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/tests/utils/__init__.py'>\n\n    def test_layer1_flow_control_8021qbb(api, utils):\n        \"\"\"\n        Test that layer1 flow control 8021qbb configuration settings\n        are being applied correctly.\n    \n        Validation: Validate the layer1 8021qbb properties applied using Restpy\n        \"\"\"\n        port1_delay = 3\n        port1_pfc_priority_groups = [1, 0, 2, 3, 7, 5, 6, 7]\n        directed_address = \"01:80:C2:00:00:01\"\n        config = api.config()\n        config.ports.port().port()\n        tx_port = config.ports[0]\n        rx_port = config.ports[1]\n        tx_port.name = \"Tx port\"\n        tx_port.location = utils.settings.ports[0]\n        rx_port.location = utils.settings.ports[1]\n        rx_port.name = \"Rx port\"\n        config.layer1.layer1().layer1()\n        fcoe1 = config.layer1[0]\n        fcoe2 = config.layer1[1]\n        fcoe1.name = \"enabled pfc delay\"\n        fcoe1.port_names = [tx_port.name]\n        fcoe1.speed = utils.settings.speed\n        fcoe1.auto_negotiate = True\n        fcoe1.media = utils.settings.media\n        fcoe1.flow_control.directed_address = directed_address\n        fcoe1.flow_control.ieee_802_1qbb.pfc_delay = 3\n        fcoe1.flow_control.ieee_802_1qbb.pfc_class_0 = port1_pfc_priority_groups[0]\n        fcoe1.flow_control.ieee_802_1qbb.pfc_class_1 = port1_pfc_priority_groups[1]\n        fcoe1.flow_control.ieee_802_1qbb.pfc_class_4 = port1_pfc_priority_groups[4]\n        fcoe2.name = \"disabled pfc delay\"\n        fcoe2.port_names = [rx_port.name]\n        fcoe2.speed = utils.settings.speed\n        fcoe2.auto_negotiate = True\n        fcoe2.media = utils.settings.media\n        fcoe2.flow_control.directed_address = directed_address\n        fcoe2.flow_control.ieee_802_1qbb.pfc_delay = 0\n        api.set_config(config)\n>       validate_8021qbb_config(api, port1_delay, port1_pfc_priority_groups)\n\ntests/layer1/test_layer1_flow_control_8021qbb.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\napi = <snappi_ixnetwork.snappi_api.Api object at 0x7f2267aefa60>\nport1_delay = 3, port1_pfc_priority_groups = [1, 0, 2, 3, 7, 5, ...]\n\n    def validate_8021qbb_config(api, port1_delay, port1_pfc_priority_groups):\n        \"\"\"\n        Validate 8021qbb config using Restpy\n        \"\"\"\n        ixnetwork = api._ixnetwork\n        port1 = ixnetwork.Vport.find()[0]\n        port2 = ixnetwork.Vport.find()[1]\n        type = port1.Type.replace(\"Fcoe\", \"\")\n        type = type[0].upper() + type[1:]\n        assert (\n            getattr(port1.L1Config, type).FlowControlDirectedAddress\n            == \"0180C2000001\"\n        )\n        assert getattr(port1.L1Config, type).Fcoe.PfcPauseDelay == port1_delay\n>       assert (\n            getattr(port1.L1Config, type).Fcoe.PfcPriorityGroups\n            == port1_pfc_priority_groups\n        )\nE       assert [1, 0, 2, 3, -1, -1, -1, -1] == [1, 0, 2, 3, 7, 5, 6, 7]\nE         \nE         At index 4 diff: -1 != 7\nE         \nE         Full diff:\nE           [\nE               1,\nE               0,\nE               2,\nE               3,\nE         -     7,\nE         ?     ^\nE         +     -1,\nE         ?     ^^\nE         -     5,\nE         ?     ^\nE         +     -1,\nE         ?     ^^\nE         -     6,\nE         ?     ^\nE         +     -1,\nE         ?     ^^\nE         -     7,\nE         ?     ^\nE         +     -1,\nE         ?     ^^\nE           ]\n\ntests/layer1/test_layer1_flow_control_8021qbb.py:57: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"steps":[{"name":"--------------------------------- Captured Log ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Config validation 0.001s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Ports configuration 7.760s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Captures configuration 0.645s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Location hosts ready [10.36.70.119] 0.325s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Speed conversion is not require for (port.name, speed) : [('Tx port', 'starTwoByFourHundredGigNonFannedOutPAM4'), ('Rx port', 'starTwoByFourHundredGigNonFannedOutPAM4')]","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Aggregation mode speed change 0.947s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Location connect [Tx port, Rx port] 31.556s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Location state check [Tx port, Rx port] 0.965s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Location configuration 35.701s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Layer1 configuration 23.331s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Lag Configuration 0.316s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Convert device config : 1.883s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Create IxNetwork device config : 0.000s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Push IxNetwork device config : 0.336s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Devices configuration 2.518s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Flows configuration 1.226s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 Start interfaces 0.963s","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"INFO     snappi_ixnetwork.snappi_api:snappi_api.py:1513 IxNet - The Traffic Item configuration has changed and it needs to be regenerated before applying it to the Ixia hardware","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"--------------------------------- Captured Out ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":20,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"resultFormat","value":"junit"},{"name":"suite","value":"pytest"},{"name":"host","value":"snappi-ixn-ci-novus10g"},{"name":"testClass","value":"layer1.test_layer1_flow_control_8021qbb"},{"name":"package","value":"layer1.test_layer1_flow_control_8021qbb"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":176,"unknown":0,"total":178},"items":[{"uid":"c6f5c08686d72508","status":"failed","statusDetails":"snappi_ixnetwork.exceptions.SnappiIxnException:   File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 283, in set_config\n    self.config_ixnetwork(config)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 362, in config_ixnetwork\n    self._connect()\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/snappi_ixnetwork/snappi_api.py\", line 1007, in _connect\n    platform = TestPlatform(self._address, rest_port=self._port)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/.env/lib/python3.10/site-packages/ixnetwork_restpy/testplatform/testplatform.py\", line 80, in __init__\n    self._connection = Connection(\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/.env/lib/python3.10/site-packages/ixnetwork_restpy/connection.py\", line 151, in __init__\n    self._scheme = self._determine_test_tool_platform(platform)\n  File \"/home/github-runner/actions-runner/_work/snappi-ixnetwork/snappi-ixnetwork/.env/lib/python3.10/site-packages/ixnetwork_restpy/connection.py\", line 220, in _determine_test_tool_platform\n    raise ConnectionError(\n Unable to connect to novus1-715849.ccu.is.keysight.com. Check the ip address and consider the rest_port parameter.","time":{"start":1753368506584,"stop":1753368506614,"duration":30}},{"uid":"6f48fde58dc10765","status":"passed","time":{"start":1752836398951,"stop":1752836431117,"duration":32166}},{"uid":"ee313b4e890a99de","status":"passed","time":{"start":1752760243902,"stop":1752760277907,"duration":34005}},{"uid":"6745ffbd5d0ad7de","status":"passed","time":{"start":1752244885705,"stop":1752244922487,"duration":36782}},{"uid":"53e14f7970b89ca8","status":"passed","time":{"start":1752145840252,"stop":1752145874430,"duration":34178}},{"uid":"c3be7415e0481bf3","status":"passed","time":{"start":1751479010972,"stop":1751479047895,"duration":36923}},{"uid":"15438249e81d46e7","status":"passed","time":{"start":1751472402834,"stop":1751472437243,"duration":34409}},{"uid":"586f3306dff34999","status":"passed","time":{"start":1751283215057,"stop":1751283247222,"duration":32165}},{"uid":"56e2e8de629bcd9d","status":"passed","time":{"start":1751276144532,"stop":1751276181343,"duration":36811}},{"uid":"82e5b52ae656b2bb","status":"passed","time":{"start":1751231642336,"stop":1751231677877,"duration":35541}},{"uid":"84c82a78f9154e69","status":"passed","time":{"start":1750985352305,"stop":1750985385751,"duration":33446}},{"uid":"582f9572e3d35dc8","status":"passed","time":{"start":1750836697285,"stop":1750836733031,"duration":35746}},{"uid":"641b704ec59c7821","status":"passed","time":{"start":1750656827226,"stop":1750656860197,"duration":32971}},{"uid":"80ca4ee0167db4a9","status":"passed","time":{"start":1750246239210,"stop":1750246271535,"duration":32325}},{"uid":"423e934d9bed600","status":"passed","time":{"start":1750239203710,"stop":1750239234131,"duration":30421}},{"uid":"72ed2c33d25c2f05","status":"passed","time":{"start":1749770085540,"stop":1749770123411,"duration":37871}},{"uid":"ee37403edeb0ed7b","status":"passed","time":{"start":1749546564693,"stop":1749546598830,"duration":34137}},{"uid":"d4df90b8bff93f23","status":"passed","time":{"start":1748968328989,"stop":1748968363026,"duration":34037}},{"uid":"976cc07def58e2e","status":"passed","time":{"start":1748929822995,"stop":1748929863976,"duration":40981}},{"uid":"fff0b8957e8f5327","status":"passed","time":{"start":1748864245704,"stop":1748864277576,"duration":31872}}]},"tags":[]},"source":"39a012c9bb7c05f0.json","parameterValues":[]}