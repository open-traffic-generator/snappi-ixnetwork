{"uid":"12b1ddb7106a8933","name":"test_validate_config_skips_callable_attributes","historyId":"pytest:unit.test_validation.TestValidation#test_validate_config_skips_callable_attributes","time":{"start":1769077516718,"stop":1769077516727,"duration":9},"status":"failed","statusMessage":"RecursionError: maximum recursion depth exceeded","statusTrace":"self = <unit.test_validation.TestValidation object at 0x7f0b71dd9960>\n\n    def test_validate_config_skips_callable_attributes(self):\n        \"\"\"Test validate_config skips callable attributes\"\"\"\n        device = Mock()\n        device.validate = Mock()\n        device._properties = [\"name\", \"some_method\"]\n    \n        def mock_get(attr):\n            if attr == \"name\":\n                return \"device1\"\n            elif attr == \"some_method\":\n                return Mock(return_value=\"callable\")\n            return None\n    \n        device.get = mock_get\n        device.__class__.__name__ = \"Device\"\n        device.__module__ = \"snappi.device\"\n    \n        config = Mock()\n        config.validate = Mock()\n        config._properties = [\"devices\"]\n        config.__class__.__name__ = \"Config\"\n    \n        devices_iter = Mock()\n        devices_iter.__module__ = \"snappi.devices\"\n        devices_iter.__iter__ = Mock(return_value=iter([device]))\n    \n        config.get.side_effect = lambda x: devices_iter if x == \"devices\" else None\n    \n        with patch(\"builtins.hasattr\", return_value=False):\n            with patch(\"builtins.dir\", return_value=[\"__module__\", \"__next__\"]):\n                with patch(\"builtins.callable\", side_effect=lambda x: x == mock_get(\"some_method\")):\n                    self.api.snappi_config = config\n    \n>                   self.validation.validate_config()\n\ntests/unit/test_validation.py:217: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nsnappi_ixnetwork/validation.py:16: in validate_config\n    self.__check_config_objects(self._api.snappi_config, item_ids=[])\nsnappi_ixnetwork/validation.py:23: in __check_config_objects\n    config_item.validate()\n/usr/lib/python3.10/unittest/mock.py:1114: in __call__\n    return self._mock_call(*args, **kwargs)\n/usr/lib/python3.10/unittest/mock.py:1118: in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n/usr/lib/python3.10/unittest/mock.py:1190: in _execute_mock_call\n    return self.return_value\n/usr/lib/python3.10/unittest/mock.py:532: in __get_return_value\n    ret = self._get_child_mock(\n/usr/lib/python3.10/unittest/mock.py:1040: in _get_child_mock\n    return klass(**kw)\n/usr/lib/python3.10/unittest/mock.py:1096: in __init__\n    _safe_super(CallableMixin, self).__init__(\n/usr/lib/python3.10/unittest/mock.py:450: in __init__\n    self._mock_add_spec(spec, spec_set, _spec_as_instance, _eat_self)\n/usr/lib/python3.10/unittest/mock.py:505: in _mock_add_spec\n    if iscoroutinefunction(getattr(spec, attr, None)):\n/usr/lib/python3.10/asyncio/coroutines.py:166: in iscoroutinefunction\n    return (inspect.iscoroutinefunction(func) or\n/usr/lib/python3.10/inspect.py:313: in iscoroutinefunction\n    return _has_code_flag(obj, CO_COROUTINE)\n/usr/lib/python3.10/inspect.py:297: in _has_code_flag\n    if not (isfunction(f) or _signature_is_functionlike(f)):\n/usr/lib/python3.10/inspect.py:2004: in _signature_is_functionlike\n    if not callable(obj) or isclass(obj):\n/usr/lib/python3.10/unittest/mock.py:1114: in __call__\n    return self._mock_call(*args, **kwargs)\n/usr/lib/python3.10/unittest/mock.py:1118: in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n/usr/lib/python3.10/unittest/mock.py:1179: in _execute_mock_call\n    result = effect(*args, **kwargs)\ntests/unit/test_validation.py:214: in <lambda>\n    with patch(\"builtins.callable\", side_effect=lambda x: x == mock_get(\"some_method\")):\ntests/unit/test_validation.py:194: in mock_get\n    return Mock(return_value=\"callable\")\n/usr/lib/python3.10/unittest/mock.py:1096: in __init__\n    _safe_super(CallableMixin, self).__init__(\n/usr/lib/python3.10/unittest/mock.py:450: in __init__\n    self._mock_add_spec(spec, spec_set, _spec_as_instance, _eat_self)\n/usr/lib/python3.10/unittest/mock.py:505: in _mock_add_spec\n    if iscoroutinefunction(getattr(spec, attr, None)):\n/usr/lib/python3.10/asyncio/coroutines.py:166: in iscoroutinefunction\n    return (inspect.iscoroutinefunction(func) or\nE   RecursionError: maximum recursion depth exceeded\n!!! Recursion detected (same locals & position)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"steps":[{"name":"--------------------------------- Captured Log ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"--------------------------------- Captured Out ---------------------------------","time":{},"steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"resultFormat","value":"junit"},{"name":"suite","value":"pytest"},{"name":"host","value":"snappi-ixn-ci-novus10g"},{"name":"testClass","value":"unit.test_validation.TestValidation"},{"name":"package","value":"unit.test_validation.TestValidation"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"12b1ddb7106a8933.json","parameterValues":[]}